{% extends 'base.html' %}
{% load i18n %}

{% block title %}{% trans "Buscar Productos" %}{% endblock %}

{% block content %}
  <h1 class="mb-4">üîç {% trans "Buscar Productos" %}</h1>
  
  <form method="get" action="{% url 'search' %}" class="mb-5">
      <div class="input-group input-group-lg">
          <input type="text" name="q" class="form-control" placeholder="{% trans '¬øQu√© est√°s buscando?' %}" value="{{ request.GET.q }}">
          <button class="btn btn-primary" type="submit">{% trans "Buscar" %}</button>
      </div>
  </form>

  {% if request.GET.q %}
      <h3>{% trans "Resultados para:" %} "{{ request.GET.q }}"</h3>
      <hr>
      {% if productos %}
        <div class="list-group">
          {% for producto in productos %}
            <a href="{% url 'producto' producto.id %}?origin=search" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
              <div>
                <h5 class="mb-1">{{ producto.nombre }}</h5>
                <small class="text-muted">{{ producto.descripcion|truncatewords:15 }}</small>
              </div>
              <span class="badge bg-success rounded-pill">{{ producto.precio_base }} ‚Ç¨</span>
            </a>
          {% endfor %}
        </div>
      {% else %}
        <div class="alert alert-warning">
            {% trans "No encontramos productos que coincidan con tu b√∫squeda." %}
        </div>
      {% endif %}
  {% endif %}
{% endblock %}